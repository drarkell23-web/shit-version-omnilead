<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>OmniLink Dashboard</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
<style>
body{font-family:Poppins,system-ui;background:#0b0a18;color:#fff;margin:0}
header{display:flex;justify-content:space-between;align-items:center;width:min(1200px,94vw);margin:22px auto}
.badge{width:56px;height:56px;border-radius:16px;display:grid;place-items:center;background:linear-gradient(135deg,#8a5cff,#6a4cff);color:#0b0620;font-weight:900}
.btn{background:linear-gradient(135deg,#8a5cff,#6a4cff);color:#0b0620;border:none;font-weight:700;padding:10px 14px;border-radius:10px;cursor:pointer}
.grid{width:min(1200px,94vw);margin:auto;display:grid;grid-template-columns:1fr 1fr;gap:22px}
.card{background:#18152f;border-radius:16px;padding:18px;box-shadow:0 6px 20px rgba(0,0,0,.3)}
</style>
</head>
<body>
<header>
  <div style="display:flex;align-items:center;gap:12px">
    <div class="badge">OL</div>
    <h1>Admin Dashboard</h1>
  </div>
  <button class="btn" onclick="logout()">Logout</button>
</header>

<div class="grid">
  <div class="card">
    <h2>ðŸ“ˆ Company Analytics</h2>
    <canvas id="chart"></canvas>
  </div>
  <div class="card">
    <h2>ðŸ§¾ Recent Contractor Signups</h2>
    <div id="contractors"></div>
  </div>
</div>

<script>
if(!localStorage.getItem('omni_admin')){
  location.href='login.html';
}

function logout(){
  localStorage.removeItem('omni_admin');
  location.href='login.html';
}

const db=JSON.parse(localStorage.getItem('omni_pending')||'[]');
document.getElementById('contractors').innerHTML=db.length ?
  db.map(c=>`<div><b>${c.name}</b> â€” ${c.service}<br>${c.email} â€” ${c.area}</div>`).join('<hr>') :
  '<p>No pending signups yet.</p>';

new Chart(document.getElementById('chart'),{
  type:'line',
  data:{labels:['Mon','Tue','Wed','Thu','Fri','Sat','Sun'],datasets:[{label:'Lead Volume',data:[2,3,4,5,4,3,6],borderColor:'#8a5cff',fill:false}]},
  options:{plugins:{legend:{labels:{color:'#fff'}}},scales:{x:{ticks:{color:'#fff'}},y:{ticks:{color:'#fff'}}}}
});
</script>
</body>
</html>
